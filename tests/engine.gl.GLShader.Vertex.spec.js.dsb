/* eslint-env jest */

import { createWebGLMock } from './webgl.mock.js'
const webglmock = createWebGLMock(jest)
webglmock.mock()

import { GLShader } from '../src/js/glkit'

describe('engine.gl.GLShader.Vertex', function () {
  afterAll(webglmock.unmock)

  describe('#constructor', function () {
    it('allow to construct a vertex shader', function () {
      const gl = webglmock.create()
      const id = Symbol()
      gl.createShader.mockReturnValueOnce(id)

      const shader = new GLShader.Vertex(gl)

      expect(gl.createShader).toHaveBeenCalledWith(gl.VERTEX_SHADER)
      expect(shader).toBeInstanceOf(GLShader)
      expect(shader).toBeInstanceOf(GLShader.Vertex)
    })
  })
})
